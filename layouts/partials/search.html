<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
<style>
  .search-button {
      border-radius: 20px;
      padding: 8px;
      margin-right: 15px;
      cursor: pointer;
  }
  .search-container {
      padding: 10px 15px;
  }
</style>
<div class="search-container" style="display: none"></div>
<script>
  let getElem = (className) => document.getElementsByClassName(className)[0];

  window.addEventListener('DOMContentLoaded', (evt) => {
    new PagefindUI({
        element: ".search-container",
        autofocus: true,
        showSubResults: true,
    });

    let searchContainer = getElem('search-container');
    let searchInput = getElem('pagefind-ui__search-input');

    let showSearch = () => {
      searchContainer.style.display  ='block';
      searchInput.focus();
    }

    let hideSearch = () => {
      searchContainer.style.display  ='none';
      searchInput.blur();
    }

    let toggleSearch = (evt) => {
      if (searchContainer.style.display === 'none') {
        showSearch();
      } else {
        hideSearch();
      }
    };

    window.addEventListener('keydown', (evt) => {
        if (evt.key === 'Escape') {
          hideSearch();
        }
        if (evt.key === 'k' && evt.ctrlKey) {
            toggleSearch();
        }
    });

   getElem('search-button').addEventListener('click', toggleSearch);
  });
</script>

